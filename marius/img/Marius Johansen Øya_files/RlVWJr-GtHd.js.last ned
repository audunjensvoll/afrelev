if (self.CavalryLogger) { CavalryLogger.start_js(["QuZ38"]); }

__d("KeyframesRenderer",["invariant","KeyframesCanvasUtils","KeyframesDimensions","KeyframesLoop","KeyframesTween","nullthrows","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("KeyframesCanvasUtils").drawPath,i=b("KeyframesCanvasUtils").getCanvasLineCap,j=b("KeyframesCanvasUtils").getCanvasStyle,k=b("KeyframesTween").maybeTweenColor,l=b("KeyframesTween").maybeTweenPath,m=b("KeyframesTween").maybeTweenPoint2,n=b("KeyframesTween").maybeTweenScalar,o=b("KeyframesTween").tweenPointOnPath,p={ERROR_FRAMEDROP:"ERROR_FRAMEDROP"};c=60;var q=1e3/c,r=1;function s(a,b){b===void 0&&(b=100),this.$3=!1,this.$4=0,this.$1=a,this.$2=b}s.prototype.callOrIgnoreThrottled=function(){if(b("performanceNow")()>=this.$4){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];this.$5(c)}else this.$3=!0};s.prototype.callIfIgnored=function(){if(this.$3){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)}};s.prototype.callImmediately=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)};s.prototype.resetThrottling=function(){this.$4=0};s.prototype.$5=function(a){this.$3=!1,this.$4=b("performanceNow")()+this.$2,this.$1.apply(null,a)};function t(a,b){if(a.pluginsLoader){a.pluginsLoader.instances.forEach(b);for(var c=a.subassets.length-1;0<=c;c--)t(a.subassets[c],b)}}function u(a,b,c){if(a.pluginsLoader){for(var d=a.pluginsLoader.instances.length-1;0<=d;d--)a.pluginsLoader.instances[d].animationWillRenderLayer(b,c);for(var d=a.subassets.length-1;0<=d;d--)u(a.subassets[d],b,c)}}function v(a,b,c,d,e,f,g){__p&&__p();g===void 0&&(g=r);if(e<Math.max(d.fromProgress(),0)||e>Math.min(d.toProgress(),1))return;f&&f.maybeInstantiatePluginsForLayer(d);a.save();var p=d.position();if(p){p=o(e,p);var q=p.x;p=p.y;a.translate(q,p)}else{q=d.xPosition();q&&a.translate(n(e,q),0);p=d.yPosition();p&&a.translate(0,n(e,p))}q=d.rotation();q&&a.rotate(n(e,q));p=d.scale();if(p){q=m(e,p);p=q.x;q=q.y;a.scale(p,q)}p=d.anchorPoint();if(p){q=m(e,p);p=q.x;q=q.y;a.translate(-p,-q)}p=d.opacity();p=p!=null?n(e,p):1;a.globalAlpha=p*g;d.clippingPath()&&(h(a,l(e,d.clippingPath())),a.clip());if(d.path()){h(a,l(e,d.path()));q=d.gradient();var s=d.fillColor();if(q){var t=m(e,q.rampStart()),u=m(e,q.rampEnd());t=a.createLinearGradient(t.x,t.y,u.x,u.y);u=k(e,q.colorStart());q=k(e,q.colorEnd());t.addColorStop(0,j(u));t.addColorStop(1,j(q));a.fillStyle=t;a.fill()}else if(s){u=k(e,s);a.fillStyle=j(u);a.fill()}if(d.strokeWidth()){q=n(e,d.strokeWidth());q>0&&(a.strokeStyle=j(k(e,d.strokeColor())),a.lineCap=i(d.strokeLineCap()),a.lineWidth=q,a.stroke())}}t=d.bitmapIndex();b[t]&&a.drawImage(b[t],0,0);if(f){s=f.getPluginsForLayer(d.id());if(s)for(var u=0;u<s.length;u++)s[u].render(a,e)}q=d.subdocumentIndex();if(c[q]){t=c[q].doc.size();a.save();a.beginPath();a.rect(0,0,t.width(),t.height());a.clip();v(a,c[q].bitmaps,c[q].subassets,c[q].doc.rootLayer(),e-d.progressOffset(),c[q].pluginsLoader,p*g);a.restore()}for(var u=0;u<d.sublayersLength();u++)v(a,b,c,d.sublayers(u),e,f,p*g);a.restore()}function a(a,c){this.$4=0,this.$9=!1,this.$10=!1,this.$11=0,this.$13=!1,this.$14=0,this.$15=1,this.$16=1,this.$19=function(a){(this.$6||this.$12)&&this.$26(a),!this.$13?this.redrawIfNeeded():(this.$10&&this.$24(),this.$25(this.$11),this.$11+=a/this.$4,this.$8&&this.$8.callOrIgnoreThrottled(this.$14),this.$11>=1&&(this.$11%=1,this.$16=Math.max(0,this.$16-1),this.$12&&this.$12.finish(),this.$16===0?this.pause():this.$12&&this.$12.start(),this.$7&&this.$7(this.$16),this.$22()))}.bind(this),this.$2=document.createElement("canvas"),this.$3=b("nullthrows")(this.$2.getContext("2d")),this.$5=new(b("KeyframesLoop"))(this.$19),this.$12=c,this.$18=new(b("KeyframesDimensions"))(a.doc.size().width(),a.doc.size().height()),this.setDecodedAsset(a),this.$20()}a.prototype.play=function(){this.$13||(this.$13=!0,this.isFinished()&&(this.$16=this.$15),this.$12&&this.$12.start(),this.$5.start());return this};a.prototype.pause=function(){this.$13&&(this.$13=!1,this.$12&&this.$12.pause(),this.$9?this.$21():(this.$5.cancel(),this.$8&&this.$8.callIfIgnored(this.$14)));u(this.$1,this.$14,this.$13);return this};a.prototype.isPlaying=function(){return this.$13};a.prototype.isFinished=function(){return this.$16===0};a.prototype.repeatCount=function(a){this.$15=this.$16=Math.max(1,a);return this};a.prototype.repeatForever=function(){return this.repeatCount(Infinity)};a.prototype.getRepeatsRemaining=function(){return this.$16};a.prototype.seekToProgress=function(a){a>=0&&a<=1||g(0,undefined,a);this.$8&&this.$8.resetThrottling();this.$14=this.$11=a;a===0&&this.$22();this.$21();return this};a.prototype.getIntrinsicSize=function(){return[this.$18.width.intrinsic,this.$18.height.intrinsic]};a.prototype.getWidth=function(){return this.$18.width.logical};a.prototype.getHeight=function(){return this.$18.height.logical};a.prototype.setWidth=function(a){this.$18.setWidth(a);this.$20();return this};a.prototype.setHeight=function(a){this.$18.setHeight(a);this.$20();return this};a.prototype.getDecodedAsset=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.setDecodedAsset=function(a){this.$1=a;this.$4=a.doc.duration()*1e3;this.$17=a.doc.rootLayer();this.$21();this.$23();return this};a.prototype.resetDimensions=function(){this.$18.reset();this.$20();return this};a.prototype.onError=function(a){this.$6=a;return this};a.prototype.onRepeatEnd=function(a){this.$7=a;return this};a.prototype.onProgress=function(a){this.$8=a&&new s(a);return this};a.prototype.getProgress=function(){return this.$14};a.prototype.getElement=function(){return this.$2};a.prototype.hasPerformanceLogging=function(){return!!this.$12};a.prototype.redrawIfNeeded=function(){(this.$10||this.$9)&&(this.$10&&this.$24(),this.$9&&this.$25(this.$14),this.$8&&this.$8.callImmediately(this.$14));return this};a.prototype.$20=function(){this.$10=!0,this.$21()};a.prototype.$21=function(){this.$9=!0,this.$5.isRunning()||this.$5.start(1)};a.prototype.$23=function(){t(this.$1,function(a){return a.animationDidLoad()})};a.prototype.$22=function(){t(this.$1,function(a){return a.animationWillRepeat(this.$11,this.$16)}.bind(this))};a.prototype.$26=function(a){a=Math.round(a/q-1);a>0&&(this.$12&&this.$12.addFrameDrop(a),this.$6&&this.$6(p.ERROR_FRAMEDROP,a))};a.prototype.$25=function(a){a>=0&&a<=1||g(0,undefined,a),this.$3.clearRect(0,0,this.$18.width.intrinsic,this.$18.height.intrinsic),this.$1.pluginsLoader&&u(this.$1,a,this.$13),v(this.$3,this.$1.bitmaps,this.$1.subassets,this.$17,a,this.$1.pluginsLoader),this.$14=a,this.$9=!1,this.$12&&this.$12.addFrame()};a.prototype.$24=function(){this.$2.width=this.$18.width.physical,this.$2.height=this.$18.height.physical,this.$2.style.width=this.$18.width.logical+"px",this.$2.style.height=this.$18.height.logical+"px",this.$3.setTransform(1,0,0,1,0,0),this.$3.scale(this.$18.width.getPhysicalChangeRatio(),this.$18.height.getPhysicalChangeRatio()),this.$10=!1,this.$9=!0};e.exports=a}),null);