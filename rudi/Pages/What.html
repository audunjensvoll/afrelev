<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Inlogging</title>

<style>

#chat{
    display:none;
}

</style>


<script src="../../js/afrlib.js"></script>

<script>


    function login() {

var bruker= {
brukernavn: document.getElementById("bruker_navn").value, 
passord: document.getElementById("bruker_password").value
}


get("http://192.168.1.196:5000/login", bruker, onLogin);


document.getElementById("chat").style.display = "block";
document.getElementById("login").style.display = "none";
    }


    var brukernavn="";
    var tilgangskode ="";

    function onLogin (resultat) 
    {
        if (resultat.kode)
        {
            tilgangskode = resultat.kode;
            document.getElementById("chat").style.display = "block";
document.getElementById("login").style.display = "none";
        }
    }

function logout() {
    tilgangskode ="";
    document.getElementById("chat").style.display = "none";
document.getElementById("login").style.display = "block";

}


function sendMelding()
{
    var meldingstekst = document.getElementById("nymelding").value;
    var request = {
        user: brukernavn,
        message: meldingstekst,
        kode: tilgangskode
    }
    post("http://192.168.1.196:5000/chat", request, onMessage)
}

function onMessage(response)
{
    console.log("response");
}
</script>
    
</head>



<body>
    
<h1>Dildo</h1>

<div id="login">
<h2>Login </h2>
<button onclick="login()">Login</button> <br>
Brukernavn: <input type="text" id="bruker_navn"> <br>
Passord: <input type="password" id="bruker_password">

</div>

<div id="chat">

    
<h2>Chat</h2>
Hei Rudi
<button onclick="logout()">Logout</button>
<br>
<input type="text" id="nymelding"> 
<button onclick="sendMelding">Send</button>
<br>
<div id="meldinger">
Her kommer alle meldinger....
</div>
</div>

</body>



</html>
